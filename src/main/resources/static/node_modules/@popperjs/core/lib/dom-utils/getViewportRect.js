import getWindow from "@popperjs/core/lib/dom-utils/getWindow.d.ts";
import getDocumentElement from "@popperjs/core/lib/dom-utils/getDocumentElement.d.ts";
import getWindowScrollBarX from "@popperjs/core/lib/dom-utils/getWindowScrollBarX.d.ts";
import isLayoutViewport from "@popperjs/core/lib/dom-utils/isLayoutViewport.d.ts";
export default function getViewportRect(element, strategy) {
  var win = getWindow(element);
  var html = getDocumentElement(element);
  var visualViewport = win.visualViewport;
  var width = html.clientWidth;
  var height = html.clientHeight;
  var x = 0;
  var y = 0;

  if (visualViewport) {
    width = visualViewport.width;
    height = visualViewport.height;
    var layoutViewport = isLayoutViewport();

    if (layoutViewport || !layoutViewport && strategy === 'fixed') {
      x = visualViewport.offsetLeft;
      y = visualViewport.offsetTop;
    }
  }

  return {
    width: width,
    height: height,
    x: x + getWindowScrollBarX(element),
    y: y
  };
}